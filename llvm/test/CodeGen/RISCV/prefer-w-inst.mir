# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 4
# RUN: llc %s -mtriple=riscv64 -run-pass=riscv-opt-w-instrs \
# RUN:   -mattr=+m -o - | FileCheck %s -check-prefixes=NO-PREFER-W-INST
# RUN: llc %s -mtriple=riscv64 -run-pass=riscv-opt-w-instrs \
# RUN:   -mattr=+m,+prefer-w-inst -o - | FileCheck %s -check-prefixes=PREFER-W-INST
# RUN: llc %s -mtriple=riscv64 -run-pass=riscv-opt-w-instrs \
# RUN:   -mattr=+m -riscv-enable-append-w-suffix -o - | FileCheck %s -check-prefixes=PREFER-W-INST

---
name: addiw
body:             |
  bb.0.entry:
    liveins: $x10, $x11
    ; NO-PREFER-W-INST-LABEL: name: addiw
    ; NO-PREFER-W-INST: liveins: $x10, $x11
    ; NO-PREFER-W-INST-NEXT: {{  $}}
    ; NO-PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; NO-PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; NO-PREFER-W-INST-NEXT: [[ADDI:%[0-9]+]]:gpr = ADDI [[COPY]], 1
    ; NO-PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[ADDI]], 1
    ; NO-PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; NO-PREFER-W-INST-NEXT: PseudoRET
    ;
    ; PREFER-W-INST-LABEL: name: addiw
    ; PREFER-W-INST: liveins: $x10, $x11
    ; PREFER-W-INST-NEXT: {{  $}}
    ; PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[COPY]], 1
    ; PREFER-W-INST-NEXT: [[ADDIW1:%[0-9]+]]:gpr = ADDIW [[ADDIW]], 1
    ; PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW1]]
    ; PREFER-W-INST-NEXT: PseudoRET
    %1:gpr = COPY $x10
    %2:gpr = COPY $x11
    %3:gpr = ADDI %1, 1
    %4:gpr = ADDIW %3, 1
    $x10 = COPY %4
    PseudoRET
...

---
name: addw
body:             |
  bb.0.entry:
    liveins: $x10, $x11
    ; NO-PREFER-W-INST-LABEL: name: addw
    ; NO-PREFER-W-INST: liveins: $x10, $x11
    ; NO-PREFER-W-INST-NEXT: {{  $}}
    ; NO-PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; NO-PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; NO-PREFER-W-INST-NEXT: [[ADD:%[0-9]+]]:gpr = ADD [[COPY]], [[COPY1]]
    ; NO-PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[ADD]], 1
    ; NO-PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; NO-PREFER-W-INST-NEXT: PseudoRET
    ;
    ; PREFER-W-INST-LABEL: name: addw
    ; PREFER-W-INST: liveins: $x10, $x11
    ; PREFER-W-INST-NEXT: {{  $}}
    ; PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; PREFER-W-INST-NEXT: [[ADDW:%[0-9]+]]:gpr = ADDW [[COPY]], [[COPY1]]
    ; PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[ADDW]], 1
    ; PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; PREFER-W-INST-NEXT: PseudoRET
    %1:gpr = COPY $x10
    %2:gpr = COPY $x11
    %3:gpr = ADD %1, %2
    %4:gpr = ADDIW %3, 1
    $x10 = COPY %4
    PseudoRET
...

---
name: mulw
body:             |
  bb.0.entry:
    liveins: $x10, $x11
    ; NO-PREFER-W-INST-LABEL: name: mulw
    ; NO-PREFER-W-INST: liveins: $x10, $x11
    ; NO-PREFER-W-INST-NEXT: {{  $}}
    ; NO-PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; NO-PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; NO-PREFER-W-INST-NEXT: [[MUL:%[0-9]+]]:gpr = MUL [[COPY]], [[COPY1]]
    ; NO-PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[MUL]], 1
    ; NO-PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; NO-PREFER-W-INST-NEXT: PseudoRET
    ;
    ; PREFER-W-INST-LABEL: name: mulw
    ; PREFER-W-INST: liveins: $x10, $x11
    ; PREFER-W-INST-NEXT: {{  $}}
    ; PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; PREFER-W-INST-NEXT: [[MULW:%[0-9]+]]:gpr = MULW [[COPY]], [[COPY1]]
    ; PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[MULW]], 1
    ; PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; PREFER-W-INST-NEXT: PseudoRET
    %1:gpr = COPY $x10
    %2:gpr = COPY $x11
    %3:gpr = MUL %1, %2
    %4:gpr = ADDIW %3, 1
    $x10 = COPY %4
    PseudoRET
...


---
name: slli
body:             |
  bb.0.entry:
    liveins: $x10, $x11
    ; NO-PREFER-W-INST-LABEL: name: slli
    ; NO-PREFER-W-INST: liveins: $x10, $x11
    ; NO-PREFER-W-INST-NEXT: {{  $}}
    ; NO-PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; NO-PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; NO-PREFER-W-INST-NEXT: [[SLLI:%[0-9]+]]:gpr = SLLI [[COPY]], [[COPY1]]
    ; NO-PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[SLLI]], 1
    ; NO-PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; NO-PREFER-W-INST-NEXT: PseudoRET
    ;
    ; PREFER-W-INST-LABEL: name: slli
    ; PREFER-W-INST: liveins: $x10, $x11
    ; PREFER-W-INST-NEXT: {{  $}}
    ; PREFER-W-INST-NEXT: [[COPY:%[0-9]+]]:gpr = COPY $x10
    ; PREFER-W-INST-NEXT: [[COPY1:%[0-9]+]]:gpr = COPY $x11
    ; PREFER-W-INST-NEXT: [[SLLIW:%[0-9]+]]:gpr = SLLIW [[COPY]], [[COPY1]]
    ; PREFER-W-INST-NEXT: [[ADDIW:%[0-9]+]]:gpr = ADDIW [[SLLIW]], 1
    ; PREFER-W-INST-NEXT: $x10 = COPY [[ADDIW]]
    ; PREFER-W-INST-NEXT: PseudoRET
    %1:gpr = COPY $x10
    %2:gpr = COPY $x11
    %3:gpr = SLLI %1, %2
    %4:gpr = ADDIW %3, 1
    $x10 = COPY %4
    PseudoRET
...
